{"ast":null,"code":"var _jsxFileName = \"/home/wande/Desktop/Irene MERN Stack/mern-final-project-irenenderitu/client/src/App.js\",\n  _s = $RefreshSig$();\n// // import React, { useState, useEffect } from 'react';\n// // import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n// // import axios from 'axios';\n\n// // // Components\n// // import Landing from './pages/Landing';\n// // import Login from './pages/Login';\n// // import Register from './pages/Register';\n// // import Dashboard from './pages/Dashboard';\n// // import ReportIncident from './pages/ReportIncident';\n// // import MyReports from './pages/MyReports';\n// // import Admin from './pages/Admin';\n\n// // // Set axios base URL\n// // axios.defaults.baseURL = 'http://localhost:5000/api';\n\n// // function App() {\n// //   const [user, setUser] = useState(null);\n// //   const [loading, setLoading] = useState(true);\n\n// //   useEffect(() => {\n// //     const token = localStorage.getItem('token');\n// //     if (token) {\n// //       axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n// //       fetchUser();\n// //     } else {\n// //       setLoading(false);\n// //     }\n// //   }, []);\n\n// //   const fetchUser = async () => {\n// //     try {\n// //       const res = await axios.get('/auth/me');\n// //       setUser(res.data.user);\n// //     } catch (error) {\n// //       localStorage.removeItem('token');\n// //       delete axios.defaults.headers.common['Authorization'];\n// //     }\n// //     setLoading(false);\n// //   };\n\n// //   const login = (token, userData) => {\n// //     localStorage.setItem('token', token);\n// //     axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n// //     setUser(userData);\n// //   };\n\n// //   const logout = () => {\n// //     localStorage.removeItem('token');\n// //     delete axios.defaults.headers.common['Authorization'];\n// //     setUser(null);\n// //   };\n\n// //   if (loading) {\n// //     return (\n// //       <div style={{ \n// //         display: 'flex', \n// //         justifyContent: 'center', \n// //         alignItems: 'center', \n// //         height: '100vh',\n// //         fontSize: '1.2rem'\n// //       }}>\n// //         Loading...\n// //       </div>\n// //     );\n// //   }\n\n// //   return (\n// //     <Router>\n// //       <div className=\"App\">\n// //         <Routes>\n// //           {/* Public routes */}\n// //           <Route path=\"/\" element={<Landing />} />\n// //           <Route \n// //             path=\"/login\" \n// //             element={!user ? <Login onLogin={login} /> : <Navigate to=\"/dashboard\" />} \n// //           />\n// //           <Route \n// //             path=\"/register\" \n// //             element={!user ? <Register onLogin={login} /> : <Navigate to=\"/dashboard\" />} \n// //           />\n\n// //           {/* Protected routes */}\n// //           <Route \n// //             path=\"/dashboard\" \n// //             element={user ? <Dashboard user={user} /> : <Navigate to=\"/login\" />} \n// //           />\n// //           <Route \n// //             path=\"/report\" \n// //             element={user ? <ReportIncident user={user} /> : <Navigate to=\"/login\" />} \n// //           />\n// //           <Route \n// //             path=\"/my-reports\" \n// //             element={user ? <MyReports user={user} /> : <Navigate to=\"/login\" />} \n// //           />\n// //           <Route \n// //             path=\"/admin\" \n// //             element={user && user.role === 'admin' ? <Admin /> : <Navigate to=\"/dashboard\" />} \n// //           />\n\n// //           {/* Catch all route */}\n// //           <Route path=\"*\" element={<Navigate to=\"/\" />} />\n// //         </Routes>\n// //       </div>\n// //     </Router>\n// //   );\n// // }\n\n// // export default App;\n// import React, { useState, useEffect } from 'react';\n// import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n// import axios from 'axios';\n\n// // Components\n// import Landing from './pages/Landing';\n// import Login from './pages/Login';\n// import Register from './pages/Register';\n// import Dashboard from './pages/Dashboard';\n// import ReportIncident from './pages/ReportIncident';\n// import MyReports from './pages/MyReports';\n// import Admin from './pages/Admin';\n\n// // Set axios base URL\n// axios.defaults.baseURL = 'http://localhost:5000/api';\n\n// function App() {\n//   const [user, setUser] = useState(null);\n//   const [loading, setLoading] = useState(true);\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('token');\n//     if (token) {\n//       axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n//       fetchUser();\n//     } else {\n//       setLoading(false);\n//     }\n//   }, []);\n\n//   const fetchUser = async () => {\n//     try {\n//       const res = await axios.get('/auth/me');\n//       setUser(res.data.user);\n//     } catch (error) {\n//       localStorage.removeItem('token');\n//       delete axios.defaults.headers.common['Authorization'];\n//     }\n//     setLoading(false);\n//   };\n\n//   const login = (token, userData) => {\n//     localStorage.setItem('token', token);\n//     axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n//     setUser(userData);\n\n//     // Redirect based on role after login\n//     if (userData.role === 'counselor' || userData.role === 'admin') {\n//       return <Navigate to=\"/admin\" />;\n//     } else {\n//       return <Navigate to=\"/dashboard\" />;\n//     }\n//   };\n\n//   const register = (token, userData) => {\n//     localStorage.setItem('token', token);\n//     axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n//     setUser(userData);\n\n//     // After registration, redirect to login for regular users\n//     // For counselors/admins, redirect directly to admin panel\n//     if (userData.role === 'counselor' || userData.role === 'admin') {\n//       return <Navigate to=\"/admin\" />;\n//     } else {\n//       // For regular users, redirect to login page\n//       localStorage.removeItem('token');\n//       delete axios.defaults.headers.common['Authorization'];\n//       setUser(null);\n//       return <Navigate to=\"/login\" />;\n//     }\n//   };\n\n//   const logout = () => {\n//     localStorage.removeItem('token');\n//     delete axios.defaults.headers.common['Authorization'];\n//     setUser(null);\n//   };\n\n//   if (loading) {\n//     return (\n//       <div style={{ \n//         display: 'flex', \n//         justifyContent: 'center', \n//         alignItems: 'center', \n//         height: '100vh',\n//         fontSize: '1.2rem'\n//       }}>\n//         Loading...\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <Router>\n//       <div className=\"App\">\n//         <Routes>\n//           {/* Public routes */}\n//           <Route path=\"/\" element={<Landing />} />\n//           <Route \n//             path=\"/login\" \n//             element={!user ? <Login onLogin={login} /> : (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <Navigate to=\"/dashboard\" />} \n//           />\n//           <Route \n//             path=\"/register\" \n//             element={!user ? <Register onRegister={register} /> : (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <Navigate to=\"/dashboard\" />} \n//           />\n\n//           {/* Protected routes */}\n//           <Route \n//             path=\"/dashboard\" \n//             element={user ? (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <Dashboard user={user} /> : <Navigate to=\"/login\" />} \n//           />\n//           <Route \n//             path=\"/report\" \n//             element={user ? (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <ReportIncident user={user} /> : <Navigate to=\"/login\" />} \n//           />\n//           <Route \n//             path=\"/my-reports\" \n//             element={user ? (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <MyReports user={user} /> : <Navigate to=\"/login\" />} \n//           />\n//           <Route \n//             path=\"/admin\" \n//             element={user && (user.role === 'counselor' || user.role === 'admin') ? <Admin /> : <Navigate to=\"/dashboard\" />} \n//           />\n\n//           {/* Catch all route */}\n//           <Route path=\"*\" element={<Navigate to=\"/\" />} />\n//         </Routes>\n//       </div>\n//     </Router>\n//   );\n// }\n\n// export default App;\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport axios from 'axios';\n\n// Components\nimport Landing from './pages/Landing';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Dashboard from './pages/Dashboard';\nimport ReportIncident from './pages/ReportIncident';\nimport MyReports from './pages/MyReports';\nimport Admin from './pages/Admin'; // Counselors will use this page\n\n// Set axios base URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.baseURL = 'http://localhost:5000/api';\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      fetchUser();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n  const fetchUser = async () => {\n    try {\n      const res = await axios.get('/auth/me');\n      setUser(res.data.user);\n    } catch (error) {\n      localStorage.removeItem('token');\n      delete axios.defaults.headers.common['Authorization'];\n    }\n    setLoading(false);\n  };\n  const login = (token, userData) => {\n    localStorage.setItem('token', token);\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    setUser(userData);\n  };\n  const register = (token, userData) => {\n    localStorage.setItem('token', token);\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    setUser(userData);\n  };\n  const logout = () => {\n    localStorage.removeItem('token');\n    delete axios.defaults.headers.common['Authorization'];\n    setUser(null);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        fontSize: '1.2rem'\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Landing, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: !user ? /*#__PURE__*/_jsxDEV(Login, {\n            onLogin: login\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 19\n          }, this) : user.role === 'counselor' ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          element: !user ? /*#__PURE__*/_jsxDEV(Register, {\n            onRegister: register\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 19\n          }, this) : user.role === 'counselor' ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/dashboard\",\n          element: user ? user.role === 'counselor' ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Dashboard, {\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/report\",\n          element: user ? user.role === 'counselor' ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(ReportIncident, {\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/my-reports\",\n          element: user ? user.role === 'counselor' ? /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(MyReports, {\n            user: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/admin\",\n          element: user && user.role === 'counselor' ? /*#__PURE__*/_jsxDEV(Admin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 318,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","axios","Landing","Login","Register","Dashboard","ReportIncident","MyReports","Admin","jsxDEV","_jsxDEV","defaults","baseURL","App","_s","user","setUser","loading","setLoading","token","localStorage","getItem","headers","common","fetchUser","res","get","data","error","removeItem","login","userData","setItem","register","logout","style","display","justifyContent","alignItems","height","fontSize","children","fileName","_jsxFileName","lineNumber","columnNumber","className","path","element","onLogin","role","to","onRegister","_c","$RefreshReg$"],"sources":["/home/wande/Desktop/Irene MERN Stack/mern-final-project-irenenderitu/client/src/App.js"],"sourcesContent":["// // import React, { useState, useEffect } from 'react';\n// // import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n// // import axios from 'axios';\n\n// // // Components\n// // import Landing from './pages/Landing';\n// // import Login from './pages/Login';\n// // import Register from './pages/Register';\n// // import Dashboard from './pages/Dashboard';\n// // import ReportIncident from './pages/ReportIncident';\n// // import MyReports from './pages/MyReports';\n// // import Admin from './pages/Admin';\n\n// // // Set axios base URL\n// // axios.defaults.baseURL = 'http://localhost:5000/api';\n\n// // function App() {\n// //   const [user, setUser] = useState(null);\n// //   const [loading, setLoading] = useState(true);\n\n// //   useEffect(() => {\n// //     const token = localStorage.getItem('token');\n// //     if (token) {\n// //       axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n// //       fetchUser();\n// //     } else {\n// //       setLoading(false);\n// //     }\n// //   }, []);\n\n// //   const fetchUser = async () => {\n// //     try {\n// //       const res = await axios.get('/auth/me');\n// //       setUser(res.data.user);\n// //     } catch (error) {\n// //       localStorage.removeItem('token');\n// //       delete axios.defaults.headers.common['Authorization'];\n// //     }\n// //     setLoading(false);\n// //   };\n\n// //   const login = (token, userData) => {\n// //     localStorage.setItem('token', token);\n// //     axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n// //     setUser(userData);\n// //   };\n\n// //   const logout = () => {\n// //     localStorage.removeItem('token');\n// //     delete axios.defaults.headers.common['Authorization'];\n// //     setUser(null);\n// //   };\n\n// //   if (loading) {\n// //     return (\n// //       <div style={{ \n// //         display: 'flex', \n// //         justifyContent: 'center', \n// //         alignItems: 'center', \n// //         height: '100vh',\n// //         fontSize: '1.2rem'\n// //       }}>\n// //         Loading...\n// //       </div>\n// //     );\n// //   }\n\n// //   return (\n// //     <Router>\n// //       <div className=\"App\">\n// //         <Routes>\n// //           {/* Public routes */}\n// //           <Route path=\"/\" element={<Landing />} />\n// //           <Route \n// //             path=\"/login\" \n// //             element={!user ? <Login onLogin={login} /> : <Navigate to=\"/dashboard\" />} \n// //           />\n// //           <Route \n// //             path=\"/register\" \n// //             element={!user ? <Register onLogin={login} /> : <Navigate to=\"/dashboard\" />} \n// //           />\n          \n// //           {/* Protected routes */}\n// //           <Route \n// //             path=\"/dashboard\" \n// //             element={user ? <Dashboard user={user} /> : <Navigate to=\"/login\" />} \n// //           />\n// //           <Route \n// //             path=\"/report\" \n// //             element={user ? <ReportIncident user={user} /> : <Navigate to=\"/login\" />} \n// //           />\n// //           <Route \n// //             path=\"/my-reports\" \n// //             element={user ? <MyReports user={user} /> : <Navigate to=\"/login\" />} \n// //           />\n// //           <Route \n// //             path=\"/admin\" \n// //             element={user && user.role === 'admin' ? <Admin /> : <Navigate to=\"/dashboard\" />} \n// //           />\n          \n// //           {/* Catch all route */}\n// //           <Route path=\"*\" element={<Navigate to=\"/\" />} />\n// //         </Routes>\n// //       </div>\n// //     </Router>\n// //   );\n// // }\n\n// // export default App;\n// import React, { useState, useEffect } from 'react';\n// import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\n// import axios from 'axios';\n\n// // Components\n// import Landing from './pages/Landing';\n// import Login from './pages/Login';\n// import Register from './pages/Register';\n// import Dashboard from './pages/Dashboard';\n// import ReportIncident from './pages/ReportIncident';\n// import MyReports from './pages/MyReports';\n// import Admin from './pages/Admin';\n\n// // Set axios base URL\n// axios.defaults.baseURL = 'http://localhost:5000/api';\n\n// function App() {\n//   const [user, setUser] = useState(null);\n//   const [loading, setLoading] = useState(true);\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('token');\n//     if (token) {\n//       axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n//       fetchUser();\n//     } else {\n//       setLoading(false);\n//     }\n//   }, []);\n\n//   const fetchUser = async () => {\n//     try {\n//       const res = await axios.get('/auth/me');\n//       setUser(res.data.user);\n//     } catch (error) {\n//       localStorage.removeItem('token');\n//       delete axios.defaults.headers.common['Authorization'];\n//     }\n//     setLoading(false);\n//   };\n\n//   const login = (token, userData) => {\n//     localStorage.setItem('token', token);\n//     axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n//     setUser(userData);\n    \n//     // Redirect based on role after login\n//     if (userData.role === 'counselor' || userData.role === 'admin') {\n//       return <Navigate to=\"/admin\" />;\n//     } else {\n//       return <Navigate to=\"/dashboard\" />;\n//     }\n//   };\n\n//   const register = (token, userData) => {\n//     localStorage.setItem('token', token);\n//     axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n//     setUser(userData);\n    \n//     // After registration, redirect to login for regular users\n//     // For counselors/admins, redirect directly to admin panel\n//     if (userData.role === 'counselor' || userData.role === 'admin') {\n//       return <Navigate to=\"/admin\" />;\n//     } else {\n//       // For regular users, redirect to login page\n//       localStorage.removeItem('token');\n//       delete axios.defaults.headers.common['Authorization'];\n//       setUser(null);\n//       return <Navigate to=\"/login\" />;\n//     }\n//   };\n\n//   const logout = () => {\n//     localStorage.removeItem('token');\n//     delete axios.defaults.headers.common['Authorization'];\n//     setUser(null);\n//   };\n\n//   if (loading) {\n//     return (\n//       <div style={{ \n//         display: 'flex', \n//         justifyContent: 'center', \n//         alignItems: 'center', \n//         height: '100vh',\n//         fontSize: '1.2rem'\n//       }}>\n//         Loading...\n//       </div>\n//     );\n//   }\n\n//   return (\n//     <Router>\n//       <div className=\"App\">\n//         <Routes>\n//           {/* Public routes */}\n//           <Route path=\"/\" element={<Landing />} />\n//           <Route \n//             path=\"/login\" \n//             element={!user ? <Login onLogin={login} /> : (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <Navigate to=\"/dashboard\" />} \n//           />\n//           <Route \n//             path=\"/register\" \n//             element={!user ? <Register onRegister={register} /> : (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <Navigate to=\"/dashboard\" />} \n//           />\n          \n//           {/* Protected routes */}\n//           <Route \n//             path=\"/dashboard\" \n//             element={user ? (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <Dashboard user={user} /> : <Navigate to=\"/login\" />} \n//           />\n//           <Route \n//             path=\"/report\" \n//             element={user ? (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <ReportIncident user={user} /> : <Navigate to=\"/login\" />} \n//           />\n//           <Route \n//             path=\"/my-reports\" \n//             element={user ? (user.role === 'counselor' || user.role === 'admin') ? <Navigate to=\"/admin\" /> : <MyReports user={user} /> : <Navigate to=\"/login\" />} \n//           />\n//           <Route \n//             path=\"/admin\" \n//             element={user && (user.role === 'counselor' || user.role === 'admin') ? <Admin /> : <Navigate to=\"/dashboard\" />} \n//           />\n          \n//           {/* Catch all route */}\n//           <Route path=\"*\" element={<Navigate to=\"/\" />} />\n//         </Routes>\n//       </div>\n//     </Router>\n//   );\n// }\n\n// export default App;\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport axios from 'axios';\n\n// Components\nimport Landing from './pages/Landing';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Dashboard from './pages/Dashboard';\nimport ReportIncident from './pages/ReportIncident';\nimport MyReports from './pages/MyReports';\nimport Admin from './pages/Admin'; // Counselors will use this page\n\n// Set axios base URL\naxios.defaults.baseURL = 'http://localhost:5000/api';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      fetchUser();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const fetchUser = async () => {\n    try {\n      const res = await axios.get('/auth/me');\n      setUser(res.data.user);\n    } catch (error) {\n      localStorage.removeItem('token');\n      delete axios.defaults.headers.common['Authorization'];\n    }\n    setLoading(false);\n  };\n\n  const login = (token, userData) => {\n    localStorage.setItem('token', token);\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    setUser(userData);\n  };\n\n  const register = (token, userData) => {\n    localStorage.setItem('token', token);\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    setUser(userData);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    delete axios.defaults.headers.common['Authorization'];\n    setUser(null);\n  };\n\n  if (loading) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        fontSize: '1.2rem'\n      }}>\n        Loading...\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          {/* Public routes */}\n          <Route path=\"/\" element={<Landing />} />\n          <Route \n            path=\"/login\" \n            element={\n              !user \n                ? <Login onLogin={login} /> \n                : user.role === 'counselor' \n                  ? <Navigate to=\"/admin\" /> \n                  : <Navigate to=\"/dashboard\" />\n            } \n          />\n          <Route \n            path=\"/register\" \n            element={\n              !user \n                ? <Register onRegister={register} /> \n                : user.role === 'counselor' \n                  ? <Navigate to=\"/admin\" /> \n                  : <Navigate to=\"/dashboard\" />\n            } \n          />\n          \n          {/* Protected routes */}\n          <Route \n            path=\"/dashboard\" \n            element={\n              user \n                ? user.role === 'counselor' \n                  ? <Navigate to=\"/admin\" /> \n                  : <Dashboard user={user} /> \n                : <Navigate to=\"/login\" />\n            } \n          />\n          <Route \n            path=\"/report\" \n            element={\n              user \n                ? user.role === 'counselor' \n                  ? <Navigate to=\"/admin\" /> \n                  : <ReportIncident user={user} /> \n                : <Navigate to=\"/login\" />\n            } \n          />\n          <Route \n            path=\"/my-reports\" \n            element={\n              user \n                ? user.role === 'counselor' \n                  ? <Navigate to=\"/admin\" /> \n                  : <MyReports user={user} /> \n                : <Navigate to=\"/login\" />\n            } \n          />\n          <Route \n            path=\"/admin\" \n            element={\n              user && user.role === 'counselor' \n                ? <Admin /> \n                : <Navigate to=\"/dashboard\" />\n            } \n          />\n          \n          {/* Catch all route */}\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAE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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}